# Deploy to Render.com

This guide will help you deploy your Gemini Backend Clone to Render.com.

## Prerequisites

1. A GitHub account
2. A Render.com account (free tier available)
3. Your code pushed to GitHub

## Step-by-Step Deployment

### 1. Prepare Your Repository

Make sure your code is pushed to GitHub with the following files:
- `render.yaml` - Deployment configuration
- `requirements.txt` - Python dependencies
- `start.sh` - Startup script
- All your application code

### 2. Connect to Render

1. Go to [render.com](https://render.com) and sign up/login
2. Click "New +" and select "Blueprint"
3. Connect your GitHub account if not already connected
4. Select your repository: `gemini-backend-clone`

### 3. Configure Environment Variables

After the initial deployment, you'll need to set these environment variables in Render Dashboard:

**Required Variables:**
- `STRIPE_SECRET_KEY` - Your Stripe secret key
- `STRIPE_WEBHOOK_SECRET` - Your Stripe webhook secret
- `GEMINI_API_KEY` - Your Google Gemini API key

**Optional Variables:**
- `ENVIRONMENT` - Set to "production" (already configured)

### 4. Deploy

1. Render will automatically detect the `render.yaml` file
2. It will create:
   - A PostgreSQL database
   - A Redis instance
   - A web service running your FastAPI app
3. Click "Apply" to start the deployment

### 5. Wait for Deployment

- Build time: ~5-10 minutes
- First deployment may take longer due to dependency installation
- You'll get a URL like: `https://your-app-name.onrender.com`

### 6. Test Your Deployment

Once deployed, test these endpoints:
- `https://your-app-name.onrender.com/` - Root endpoint
- `https://your-app-name.onrender.com/health` - Health check
- `https://your-app-name.onrender.com/docs` - API documentation

## Troubleshooting

### Common Issues:

1. **Build Failures**
   - Check that all dependencies are in `requirements.txt`
   - Ensure `pydantic-settings` is included

2. **Database Connection Issues**
   - Render automatically provides `DATABASE_URL`
   - Check that migrations run successfully

3. **Environment Variables**
   - Make sure all required API keys are set in Render Dashboard
   - `JWT_SECRET_KEY` is auto-generated by Render

4. **Redis Connection**
   - Render automatically provides `REDIS_URL`
   - Redis is included in the free tier

### Logs

Check deployment logs in Render Dashboard:
1. Go to your service
2. Click "Logs" tab
3. Look for any error messages

## API Endpoints After Deployment

Your API will be available at:
- Base URL: `https://your-app-name.onrender.com`
- API Docs: `https://your-app-name.onrender.com/docs`
- Health Check: `https://your-app-name.onrender.com/health`

## Update Your Postman Collection

After deployment, update your Postman collection base URL to:
`https://your-app-name.onrender.com`

## Free Tier Limitations

- **Sleep after inactivity**: Your app will sleep after 15 minutes of inactivity
- **Cold starts**: First request after sleep may take 30-60 seconds
- **Bandwidth**: 750 hours/month free
- **Database**: 1GB storage, 90 days retention

## Scaling (Paid Plans)

For production use, consider upgrading to paid plans for:
- No sleep mode
- Better performance
- More resources
- Custom domains 